# üîß Chat + Model B - Troubleshooting

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** Chat ‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Model B ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å

---

## üîç ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡∏û‡∏ö

### 1. Gemini ‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Function
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
- Gemini ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å function
- ‡πÑ‡∏°‡πà‡∏°‡∏µ `function_called` ‡πÉ‡∏ô response

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:**
- Function description ‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏û‡∏≠
- Query ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö function description
- Gemini model ‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö function calling ‡∏î‡∏µ

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
1. ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤
2. ‡∏õ‡∏£‡∏±‡∏ö function description
3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏±‡∏ö Gemini model ‡∏≠‡∏∑‡πà‡∏ô

---

### 2. Function Description ‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô

**‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:**
```python
{
    "name": "check_planting_window",
    "description": "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà..."
}
```

**‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á:**
```python
{
    "name": "check_planting_window",
    "description": """
    ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏∑‡∏ä‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    
    ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ñ‡∏≤‡∏°‡∏ß‡πà‡∏≤:
    - "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å[‡∏û‡∏∑‡∏ä]‡πÑ‡∏´‡∏°"
    - "[‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà]‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å[‡∏û‡∏∑‡∏ä]‡πÑ‡∏´‡∏°"
    - "‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å[‡∏û‡∏∑‡∏ä]‡πÉ‡∏ô[‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î]‡πÑ‡∏´‡∏°"
    - "‡∏Ñ‡∏ß‡∏£‡∏õ‡∏•‡∏π‡∏Å[‡∏û‡∏∑‡∏ä]‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà"
    
    ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
    - "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏£‡∏¥‡∏Å‡πÉ‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏´‡∏°"
    - "15 ‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®‡πÑ‡∏´‡∏°"
    """
}
```

---

## üí° ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô

**‚ùå ‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô:**
```
"‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏£‡∏¥‡∏Å‡πÉ‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏´‡∏°"
```

**‚úÖ ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô:**
```
"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏£‡∏¥‡∏Å‡πÉ‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏´‡∏°"
"‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏£‡∏¥‡∏Å‡πÉ‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡πà‡∏≤"
"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ß‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏£‡∏¥‡∏Å‡πÉ‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏´‡∏°"
```

---

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏ä‡πâ API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏≤‡∏°‡∏ú‡πà‡∏≤‡∏ô chat ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á:

```bash
# Check planting window
curl -X POST "http://localhost:8000/api/planting/window" \
  -H "Content-Type: application/json" \
  -d '{
    "planting_date": "2024-11-23",
    "province": "‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà"
  }'

# Get planting calendar
curl -X POST "http://localhost:8000/api/planting/calendar" \
  -H "Content-Type: application/json" \
  -d '{
    "province": "‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà",
    "crop_type": "‡∏û‡∏£‡∏¥‡∏Å",
    "months_ahead": 12
  }'
```

---

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ Python Wrapper

```python
from backend.model_b_wrapper import get_model_b

model_b = get_model_b()

# Check today
result = model_b.predict_planting_window(
    crop_type='‡∏û‡∏£‡∏¥‡∏Å',
    province='‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà',
    planting_date='2024-11-23'
)

print(f"Is Good Window: {result['is_good_window']}")
print(f"Confidence: {result['confidence']:.2%}")
print(f"Recommendation: {result['recommendation']}")
print(f"Reason: {result['reason']}")
```

---

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 4: ‡∏õ‡∏£‡∏±‡∏ö Function Description

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `backend/gemini_functions.py`:

```python
{
    "name": "check_planting_window",
    "description": """
    üå± ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏∑‡∏ä‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    
    ‚ö†Ô∏è ‡πÉ‡∏ä‡πâ function ‡∏ô‡∏µ‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö:
    - ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å
    - ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å
    - ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    
    üìù ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°:
    - "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏´‡∏°"
    - "15 ‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®‡πÑ‡∏´‡∏°"
    - "‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å‡∏Ç‡πâ‡∏≤‡∏ß‡πÉ‡∏ô‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤‡πÑ‡∏´‡∏°"
    
    ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å function ‡∏ô‡∏µ‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å
    """,
    "parameters": {
        ...
    }
}
```

---

## üß™ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### Test 1: API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á (‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô)
```bash
python test_model_b_integration.py
```

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
```
‚úÖ PASS - Wrapper Standalone
‚úÖ PASS - API Health
‚úÖ PASS - API Window Prediction
‚úÖ PASS - API Calendar
‚úÖ PASS - Model V2 Endpoint

Result: 5/5 tests passed (100%)
```

### Test 2: Python Wrapper (‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô)
```bash
python demo_model_b_live.py
```

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
```
‚úÖ DEMO 1: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å‡πÑ‡∏´‡∏°
   Is Good Window: True
   Confidence: 99.92%
   Recommendation: ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏õ‡∏•‡∏π‡∏Å‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ (‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏°‡∏≤‡∏Å)
```

### Test 3: Chat (‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô)
```bash
# ‡∏ñ‡∏≤‡∏°‡∏ú‡πà‡∏≤‡∏ô frontend chat
# ‡∏´‡∏£‡∏∑‡∏≠
curl -X POST "http://localhost:8000/chat" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏£‡∏¥‡∏Å‡πÉ‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏´‡∏°",
    "crop_id": 1,
    "price_history": [30, 32, 31],
    "weather": [100, 28],
    "crop_info": [1, 2, 1],
    "calendar": [0, 0, 1]
  }'
```

---

## üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞

| ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£ | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ | ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ |
|---------|-------|-----------|
| **API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á** | ‚úÖ ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ | 100% |
| **Python Wrapper** | ‚úÖ ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ | 100% |
| **Chat (Gemini)** | ‚ö†Ô∏è ‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô | ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö Gemini |

---

## üéØ ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ:
1. **‡πÉ‡∏ä‡πâ API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á** - ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
2. **‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô** - ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ chat
3. **‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î** - ‡∏û‡∏∑‡∏ä, ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î, ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Developer:
1. **‡∏õ‡∏£‡∏±‡∏ö Function Description** - ‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô
2. **‡πÄ‡∏û‡∏¥‡πà‡∏° Examples** - ‡πÉ‡∏ôfunction description
3. **Test ‡∏Å‡∏±‡∏ö Gemini models ‡∏≠‡∏∑‡πà‡∏ô** - ‡πÄ‡∏ä‡πà‡∏ô gemini-pro
4. **‡πÄ‡∏û‡∏¥‡πà‡∏° Logging** - ‡πÄ‡∏û‡∏∑‡πà‡∏≠ debug

---

## üîó ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏∑‡πà‡∏ô

### 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á Dedicated Endpoint
```python
@router.post("/chat/planting-check")
async def chat_planting_check(
    crop_type: str,
    province: str,
    planting_date: Optional[str] = None
):
    """
    Dedicated endpoint for planting window check
    ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô Gemini - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Model B ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
    """
    from model_b_wrapper import get_model_b
    
    model_b = get_model_b()
    
    if not planting_date:
        planting_date = datetime.now().strftime('%Y-%m-%d')
    
    result = model_b.predict_planting_window(
        crop_type=crop_type,
        province=province,
        planting_date=planting_date
    )
    
    # Format response for chat
    response_text = f"""
    {'‚úÖ' if result['is_good_window'] else '‚ùå'} {result['recommendation']}
    
    üìä ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à: {result['confidence']:.1%}
    üìù ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•: {result['reason']}
    """
    
    return {
        "success": True,
        "response": response_text,
        "data": result
    }
```

### 2. ‡∏™‡∏£‡πâ‡∏≤‡∏á Quick Action Buttons
```typescript
// Frontend - Quick action buttons
<Button onClick={() => checkPlantingWindow('‡∏û‡∏£‡∏¥‡∏Å', '‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà')}>
  ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏£‡∏¥‡∏Å
</Button>

<Button onClick={() => getPlantingCalendar('‡∏û‡∏£‡∏¥‡∏Å', '‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà')}>
  ‡∏î‡∏π‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å
</Button>
```

---

## ‚úÖ ‡∏™‡∏£‡∏∏‡∏õ

**Model B ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏î‡∏µ ‡πÅ‡∏ï‡πà:**
- ‚úÖ API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á - ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ 100%
- ‚úÖ Python Wrapper - ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ 100%
- ‚ö†Ô∏è Chat (Gemini) - ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏ß‡πà‡∏≤ Gemini ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å function ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

**‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:**
1. ‡πÉ‡∏ä‡πâ API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö production
2. ‡πÉ‡∏ä‡πâ chat ‡πÄ‡∏õ‡πá‡∏ô optional feature
3. ‡∏™‡∏£‡πâ‡∏≤‡∏á dedicated endpoints ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö planting features

---

**Created by:** Kiro AI Assistant  
**Date:** 24 ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô 2568
