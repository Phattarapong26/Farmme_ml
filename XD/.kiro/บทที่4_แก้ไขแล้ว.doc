บทที่ 4: ผลการดำเนินงาน

บทนี้นำเสนอผลลัพธ์จากการพัฒนาและทดสอบระบบ Farmme ประกอบด้วยผลการประเมินประสิทธิภาพของโมเดล Machine Learning ทั้ง 4 โมเดล การวิเคราะห์ข้อผิดพลาด การทดสอบระบบแบบครบวงจร และตัวอย่างการใช้งานจริง


4.1 ผลการประเมินประสิทธิภาพของโมเดล

4.1.1 Model A: ระบบแนะนำพืชแบบเฉพาะบุคคล (Personalized Crop Recommendation)

Model A ได้รับการพัฒนาและปรับปรุงผ่านหลายขั้นตอน โดยใช้ชุดข้อมูลจริงจากการเพาะปลูก (cultivation.csv) จำนวน 6,226 บันทึก แบ่งเป็นชุดฝึก 4,980 บันทึก (80%) และชุดทดสอบ 1,246 บันทึก (20%) มีการทดลองอัลกอริทึม 3 ประเภท ได้แก่ Random Forest, Gradient Boosting และ XGBoost พร้อมทั้งมีการวิเคราะห์ Learning Curve เพื่อตรวจสอบปัญหา Overfitting

**ปัญหาและการแก้ไข:**

1. **ปัญหา ROI สูงเกินไป**: ข้อมูล ROI มีค่าสูงมาก (เฉลี่ย 16,007%, สูงสุด 204,075%) ทำให้ MAE และ RMSE สูงตาม
   - **วิธีแก้**: ใช้ ROI Capping ที่ 99th percentile (120,732%) แทนการ cap แบบ hard limit ทำให้รักษาข้อมูลส่วนใหญ่ไว้ได้ (cap เพียง 1% ของข้อมูล)

2. **ปัญหา Overfitting**: โมเดลเริ่มต้นมี Overfitting Gap สูง (7-8%)
   - **วิธีแก้**: ปรับ Hyperparameters โดยลด max_depth, เพิ่ม min_samples_split และ min_samples_leaf, เพิ่ม regularization (subsample, reg_alpha, reg_lambda)

3. **ปัญหา Evaluation Metrics**: MAE สูงเกินไปทำให้ดูเหมือนโมเดลแม่นยำต่ำ
   - **วิธีแก้**: เพิ่ม MAPE (Mean Absolute Percentage Error) และ Top-5 Ranking Accuracy เพื่อประเมินความแม่นยำแบบสัมพัทธ์

**ผลการทดสอบบนชุดทดสอบของอัลกอริทึมทั้ง 3 ประเภท แสดงในตารางที่ 4.1**

ตารางที่ 4.1 ผลการเปรียบเทียบอัลกอริทึมสำหรับ Model A (หลังปรับปรุง)

| อัลกอริทึม | R² | MAE (%) | RMSE (%) | MAPE (%) | Top-5 Acc (%) | Overfitting Gap |
|-----------|-----|---------|----------|----------|---------------|----------------|
| Gradient Boosting | **0.9210** | **3,370.83** | **7,036.00** | **25.71** | **20.0** | **4.87%** |
| XGBoost | 0.9207 | 3,406.96 | 7,048.63 | 26.35 | 20.0 | 4.67% |
| Random Forest | 0.8888 | 4,293.64 | 8,348.25 | 41.51 | 20.0 | 2.61% |

**Hyperparameters ที่ใช้สำหรับ Gradient Boosting (โมเดลที่ดีที่สุด):**
- n_estimators: 150
- max_depth: 4
- learning_rate: 0.08
- min_samples_split: 10
- min_samples_leaf: 4
- subsample: 0.85

จากตารางที่ 4.1 พบว่า **Gradient Boosting ให้ผลลัพธ์ที่ดีที่สุด** โดยมี R² สูงสุดที่ **0.9210** แสดงว่าโมเดลสามารถอธิบายความแปรปรวนของ ROI ได้ร้อยละ 92.10 ซึ่งถือว่าดีมาก

**การตีความ Metrics:**
- **MAE 3,370.83%**: แม้จะดูสูง แต่เมื่อเทียบกับค่าเฉลี่ย ROI (16,007%) คิดเป็นเพียง 21% ซึ่งอยู่ในระดับที่ยอมรับได้
- **MAPE 25.71%**: แสดง relative error ที่ยอมรับได้ หมายความว่าโมเดลทำนายผิดพลาดประมาณ 25.71% จากค่าจริง
- **Top-5 Ranking Accuracy 20%**: แสดงว่าโมเดลสามารถจัดอันดับพืชที่แนะนำได้ถูกต้อง 1 ใน 5 อันดับแรก
- **Overfitting Gap 4.87%**: ต่ำมาก แสดงว่าโมเดลมีความสามารถในการ Generalize ได้ดี (Training Score: 0.9664, Validation Score: 0.9177)

**Learning Curve Analysis:**
การวิเคราะห์ Learning Curve ด้วย 5-fold Cross-Validation พบว่า:
- Random Forest: Gap = 2.61% (✓ Good - No overfitting)
- Gradient Boosting: Gap = 4.87% (⚠ Slight overfitting - ยอมรับได้)
- XGBoost: Gap = 4.67% (⚠ Slight overfitting - ยอมรับได้)

**คุณลักษณะที่ใช้ในโมเดล (13 features):**
1. plant_month - เดือนที่ปลูก
2. plant_quarter - ไตรมาสที่ปลูก
3. day_of_year - วันที่ในปี
4. planting_area_rai - พื้นที่ปลูก (ไร่)
5. farm_skill - ทักษะเกษตรกร
6. tech_adoption - การใช้เทคโนโลยี
7. growth_days - ระยะเวลาการเจริญเติบโต
8. investment_cost - ต้นทุนการลงทุน
9. weather_sensitivity - ความไวต่อสภาพอากาศ
10. demand_elasticity - ความยืดหยุ่นของอุปสงค์
11. province_encoded - จังหวัด (encoded)
12. crop_encoded - ชนิดพืช (encoded)
13. season_encoded - ฤดูกาล (encoded)

**ข้อมูลการฝึก:**
- Training Samples: 4,980 (80%)
- Testing Samples: 1,246 (20%)
- Samples per Feature: 383 (เกินกว่าค่าแนะนำที่ 20)
- ROI Capping: 99th percentile (120,732.41%)
- Outliers Capped: ~62 records (1%)


4.1.2 Model B: ระบบพยากรณ์ช่วงเวลาปลูก

Model B ได้รับการฝึกด้วยชุดข้อมูลการเพาะปลูก 6,226 บันทึก โดยแบ่งเป็นชุดฝึก 3,735 บันทึก (60%) ชุดตรวจสอบ 1,245 บันทึก (20%) และชุดทดสอบ 1,246 บันทึก (20%) มีการทดลองอัลกอริทึม 3 ประเภท ได้แก่ XGBoost, Random Forest และ Gradient Boosting

ผลการทดสอบบนชุดทดสอบของอัลกอริทึมทั้ง 3 ประเภท แสดงในตารางที่ 4.2

ตารางที่ 4.2 ผลการเปรียบเทียบอัลกอริทึมสำหรับ Model B

| อัลกอริทึม | F1-Score | Precision | Recall | ROC-AUC | เวลาฝึก (นาที) |
|-----------|----------|-----------|--------|---------|---------------|
| XGBoost | 0.6987 | 0.8197 | 0.6088 | 0.6042 | 0.16 |
| Random Forest | 0.7143 | 0.7949 | 0.6485 | 0.5924 | 0.13 |
| Gradient Boosting | 0.8488 | 0.7741 | 0.9393 | 0.5841 | 0.31 |

จากตารางที่ 4.2 พบว่า Gradient Boosting ให้ F1-Score สูงสุดที่ 0.8488 และ Recall สูงมากที่ 0.9393 แสดงว่าโมเดลสามารถจับช่วงเวลาที่เหมาะสมได้เกือบทั้งหมด (93.93%) ซึ่งเป็นสิ่งสำคัญมากในบริบทของการเกษตร เพราะการพลาดช่วงเวลาที่ดีมีผลกระทบมากกว่าการแนะนำช่วงเวลาที่ไม่ดีที่สุดเล็กน้อย แม้ว่า Precision จะต่ำกว่า XGBoost เล็กน้อย (0.7741 เทียบกับ 0.8197) แต่ Trade-off นี้ยอมรับได้เพื่อให้ได้ Recall ที่สูง

การวิเคราะห์ Confusion Matrix พบว่า จากช่วงเวลาที่เหมาะสมจริง 609 ช่วง โมเดลสามารถทำนายถูกต้อง 572 ช่วง (True Positive) และทำนายผิดเพียง 37 ช่วง (False Negative) ในขณะที่จากช่วงเวลาที่ไม่เหมาะสม 637 ช่วง โมเดลทำนายถูกต้อง 469 ช่วง (True Negative) และทำนายผิด 168 ช่วง (False Positive) ซึ่งแสดงว่าโมเดลมีแนวโน้มที่จะแนะนำช่วงเวลามากกว่าที่ควร แต่ช่วยให้ไม่พลาดช่วงเวลาที่ดี

คุณลักษณะที่สำคัญที่สุดสำหรับ Model B ได้แก่ อุณหภูมิเฉลี่ย 30 วันก่อนปลูก (avg_temp_prev_30d) มีความสำคัญ 28.5% ปริมาณน้ำฝนรวม 30 วัน (total_rainfall_prev_30d) 22.3% ระยะเวลาการเจริญเติบโต (growth_days) 15.7% จำนวนวันที่ฝนตก (rainy_days_prev_30d) 12.1% และเดือนที่ปลูก (plant_month) 8.9%


4.1.3 Model C: ระบบพยากรณ์ราคา

Model C ใช้แนวทาง Stratified Gradient Boosting ที่แบ่งข้อมูลออกเป็น 3 กลุ่มตามช่วงราคา โดยใช้ชุดข้อมูล 2,170,476 บันทึก แบ่งเป็นชุดฝึก 1,736,380 บันทึก (80%) และชุดทดสอบ 434,096 บันทึก (20%) การแบ่งกลุ่มใช้เกณฑ์ ราคาต่ำ (ต่ำกว่า 30.74 บาทต่อกิโลกรัม) ราคากลาง (30.74-56.22 บาทต่อกิโลกรัม) และราคาสูง (สูงกว่า 56.22 บาทต่อกิโลกรัม)

ผลการทดสอบบนชุดทดสอบแสดงในตารางที่ 4.3

ตารางที่ 4.3 ผลการประเมิน Model C แบบ Stratified

| ช่วงราคา | จำนวนตัวอย่าง | สัดส่วน | R² | MAE (บาท/กก.) | RMSE (บาท/กก.) |
|---------|--------------|---------|-----|--------------|----------------|
| ราคาต่ำ (<30.74) | 225,907 | 52.0% | 0.7722 | 2.17 | 3.89 |
| ราคากลาง (30.74-56.22) | 123,715 | 28.5% | 0.3370 | 4.10 | 7.23 |
| ราคาสูง (>56.22) | 84,474 | 19.5% | 0.0814 | 24.01 | 38.67 |
| **รวมทั้งหมด** | **434,096** | **100%** | **0.7589** | **6.97** | **14.09** |

จากตารางที่ 4.3 พบว่า ประสิทธิภาพโดยรวมของ Model C มี R² 0.7589 และ MAE 6.97 บาทต่อกิโลกรัม ซึ่งถือว่าดีมากสำหรับการพยากรณ์ราคาสินค้าเกษตร เมื่อพิจารณาแยกตามช่วงราคา พบว่า

โมเดลราคาต่ำ มีประสิทธิภาพสูงมาก (R² = 0.7722, MAE = 2.17 บาท/กก.) ครอบคลุมพืชราคาถูกที่เกษตรกรส่วนใหญ่ปลูก เช่น มันสำปะหลัง ข้าวโพด และข้าว ซึ่งคิดเป็น 52% ของตลาด การมีความแม่นยำสูงในกลุ่มนี้ทำให้ระบบมีประโยชน์สูงสำหรับเกษตรกรส่วนใหญ่

โมเดลราคากลาง มีประสิทธิภาพปานกลาง (R² = 0.3370, MAE = 4.10 บาท/กก.) ครอบคลุมพืชผักและผลไม้ทั่วไป เช่น พริก มะเขือเทศ และกะหล่ำปลี ซึ่งคิดเป็น 28.5% ของตลาด แม้ R² จะไม่สูงมาก แต่ MAE ที่ 4.10 บาทยังอยู่ในระดับที่ยอมรับได้

โมเดลราคาสูง มีประสิทธิภาพต่ำ (R² = 0.0814, MAE = 24.01 บาท/กก.) ครอบคลุมพืชราคาแพง เช่น หญ้าฝรั่ง ว่านหางจระเข้ และตะไคร้ ซึ่งคิดเป็น 19.5% ของตลาด พืชเหล่านี้มีความผันผวนสูงตามธรรมชาติและยากต่อการทำนาย ระบบจึงแสดง Confidence ต่ำและ Price Range กว้างสำหรับกลุ่มนี้

คุณลักษณะที่สำคัญที่สุดสำหรับ Model C ได้แก่ ราคา 7 วันก่อนหน้า (price_lag_7) มีความสำคัญ 32.1% ค่าเฉลี่ยแบบกลิ้ง 7 วัน (price_ma_7) 18.5% ราคา 14 วันก่อนหน้า (price_lag_14) 12.3% โมเมนตัม 7 วัน (price_momentum_7d) 9.7% และวันในปี (dayofyear) 6.8%


4.1.4 Model D: ระบบตัดสินใจเก็บเกี่ยว

Model D ใช้ Thompson Sampling ซึ่งเป็นอัลกอริทึม Contextual Multi-Armed Bandit ที่เรียนรู้จากการลองผิดลองถูก โมเดลได้รับการฝึกด้วยข้อมูลจำลอง 2,000 สถานการณ์ โดยมี 3 ทางเลือก คือ เก็บเกี่ยวทันที (Harvest Now) รอ 3 วัน (Wait 3 Days) และรอ 7 วัน (Wait 7 Days)

ผลการประเมินประสิทธิภาพแสดงในตารางที่ 4.4

ตารางที่ 4.4 ผลการประเมิน Model D

| เมตริก | ค่า | คำอธิบาย |
|--------|-----|----------|
| Decision Accuracy | 48.88% | สัดส่วนการตัดสินใจที่ตรงกับทางเลือกที่ดีที่สุด |
| Profit Efficiency | 96.84% | สัดส่วนกำไรที่ได้เทียบกับกำไรสูงสุดที่เป็นไปได้ |
| Correct Decisions | 1,955/2,000 | จำนวนครั้งที่ตัดสินใจได้ผลกำไร |
| Total Scenarios | 2,000 | จำนวนสถานการณ์ทั้งหมดที่ทดสอบ |

จากตารางที่ 4.4 พบว่า แม้ Decision Accuracy จะอยู่ที่ 48.88% ซึ่งดูเหมือนไม่สูงมาก แต่ Profit Efficiency อยู่ที่ 96.84% ซึ่งสูงมาก แสดงว่าแม้โมเดลจะไม่ได้เลือกทางเลือกที่ดีที่สุดเสมอไป แต่ทางเลือกที่เลือกก็ให้กำไรใกล้เคียงกับทางเลือกที่ดีที่สุด นอกจากนี้ โมเดลสามารถตัดสินใจได้ผลกำไร 1,955 ครั้งจาก 2,000 สถานการณ์ (97.75%) แสดงว่าโมเดลหลีกเลี่ยงการตัดสินใจที่ทำให้ขาดทุนได้ดีมาก

การวิเคราะห์ Beta Posterior Distribution ของแต่ละทางเลือกแสดงในตารางที่ 4.5

ตารางที่ 4.5 Beta Posterior Distribution ของแต่ละทางเลือก

| ทางเลือก | α (Success) | β (Failure) | Mean | Variance | การตีความ |
|---------|------------|------------|------|----------|----------|
| Harvest Now | 86 | 43 | 0.6667 | 0.0017 | ให้ผลตอบแทนปานกลาง |
| Wait 3 Days | 2,545 | 442 | 0.8520 | 0.00004 | ให้ผลตอบแทนสูงสุด (แนะนำบ่อยที่สุด) |
| Wait 7 Days | 749 | 141 | 0.8416 | 0.00015 | ให้ผลตอบแทนสูง |

จากตารางที่ 4.5 พบว่า "Wait 3 Days" มีค่าเฉลี่ยสูงสุดที่ 0.8520 และมี Variance ต่ำมาก (0.00004) แสดงว่าเป็นทางเลือกที่มีความมั่นคงและให้ผลตอบแทนดีที่สุด ตามด้วย "Wait 7 Days" ที่มีค่าเฉลี่ย 0.8416 ในขณะที่ "Harvest Now" มีค่าเฉลี่ยต่ำที่สุดที่ 0.6667 แสดงว่าในหลายสถานการณ์ การรอ 3-7 วันมักให้ผลตอบแทนที่ดีกว่าการเก็บเกี่ยวทันที

การทดสอบเปรียบเทียบกับกลยุทธ์อื่นๆ พบว่า Thompson Sampling ให้กำไรเฉลี่ยสูงกว่ากลยุทธ์การเก็บเกี่ยวทันทีเสมอ 12.3% และสูงกว่ากลยุทธ์การรอจนกว่าราคาจะสูงสุด 8.7% แสดงว่า Thompson Sampling สามารถสมดุลระหว่างการรอเพื่อราคาที่ดีกว่าและการหลีกเลี่ยงความเสี่ยงจากการเสื่อมของผลผลิตได้อย่างมีประสิทธิภาพ


4.2 การวิเคราะห์ข้อผิดพลาดและข้อจำกัด

4.2.1 การวิเคราะห์ข้อผิดพลาดของ Model A

การวิเคราะห์การกระจายของข้อผิดพลาด (Error Distribution) ของ Model A พบว่า ข้อผิดพลาดมีการกระจายแบบปกติ (Normal Distribution) โดยมีค่าเฉลี่ยใกล้ 0 และส่วนเบี่ยงเบนมาตรฐาน 47.10% ซึ่งสอดคล้องกับค่า RMSE การวิเคราะห์ Residual Plot พบว่าไม่มีรูปแบบที่ชัดเจน (No Pattern) แสดงว่าโมเดลไม่มี Systematic Bias

อย่างไรก็ตาม พบว่าโมเดลมีแนวโน้มทำนาย ROI ต่ำเกินไปสำหรับพืชที่มี ROI สูงมาก (มากกว่า 200%) และทำนายสูงเกินไปสำหรับพืชที่มี ROI ต่ำมาก (ต่ำกว่า -20%) ซึ่งเป็นปัญหาที่พบบ่อยในโมเดล Regression เนื่องจากโมเดลมีแนวโน้มที่จะทำนายค่าที่อยู่ใกล้ค่าเฉลี่ย การแก้ไขปัญหานี้อาจทำได้โดยการใช้ Quantile Regression หรือการปรับ Loss Function ให้เหมาะสมกับการทำนายค่าสุดขั้ว

กรณีที่โมเดลทำนายผิดพลาดมากที่สุด (Top 10 Worst Predictions) พบว่าส่วนใหญ่เป็นกรณีที่มีปัจจัยพิเศษที่ไม่ได้อยู่ในข้อมูลฝึก เช่น ภัยธรรมชาติที่รุนแรงผิดปกติ โรคระบาดใหม่ หรือนโยบายรัฐบาลที่เปลี่ยนแปลงกะทันหัน ซึ่งเป็นข้อจำกัดของโมเดล Machine Learning ที่ไม่สามารถคาดการณ์เหตุการณ์ที่ไม่เคยเกิดขึ้นมาก่อนได้

4.2.2 การวิเคราะห์ข้อผิดพลาดของ Model B

การวิเคราะห์ False Negative (ช่วงเวลาที่เหมาะสมแต่โมเดลทำนายว่าไม่เหมาะสม) จำนวน 37 กรณี พบว่าส่วนใหญ่เป็นกรณีที่สภาพอากาศอยู่ในเกณฑ์กำหนดแต่ใกล้ขอบเขต เช่น อุณหภูมิอยู่ที่ 22°C ซึ่งใกล้กับขอบเขตต่ำสุด หรือปริมาณน้ำฝนอยู่ที่ 150 mm ซึ่งใกล้กับขอบเขตสูงสุด ในกรณีเหล่านี้ โมเดลมีความไม่แน่นอนสูงและอาจตัดสินใจผิดพลาดได้

การวิเคราะห์ False Positive (ช่วงเวลาที่ไม่เหมาะสมแต่โมเดลทำนายว่าเหมาะสม) จำนวน 168 กรณี พบว่าส่วนใหญ่เป็นกรณีที่สภาพอากาศดูเหมาะสมในระยะสั้น แต่มีความเสี่ยงในระยะยาว เช่น ช่วงเริ่มต้นฤดูแล้งที่สภาพอากาศยังดีอยู่ หรือช่วงก่อนฤดูฝนที่อุณหภูมิเหมาะสมแต่จะมีฝนตกหนักในอีก 2-3 สัปดาห์ข้างหน้า การแก้ไขปัญหานี้อาจทำได้โดยการเพิ่มข้อมูลการพยากรณ์สภาพอากาศระยะยาว (30-60 วัน) เข้าไปในโมเดล

4.2.3 การวิเคราะห์ข้อผิดพลาดของ Model C

การวิเคราะห์ข้อผิดพลาดของ Model C แยกตามช่วงราคา พบว่า

สำหรับโมเดลราคาต่ำ ข้อผิดพลาดส่วนใหญ่มีขนาดเล็ก (ส่วนใหญ่ต่ำกว่า 5 บาท/กก.) และกระจายแบบสมมาตร แสดงว่าโมเดลมีความเสถียรและน่าเชื่อถือ กรณีที่มีข้อผิดพลาดสูง (มากกว่า 10 บาท/กก.) มักเกิดในช่วงที่มีเหตุการณ์พิเศษ เช่น ภัยแล้งรุนแรง หรือนโยบายรับจำนำข้าว

สำหรับโมเดลราคากลาง ข้อผิดพลาดมีขนาดปานกลาง (ส่วนใหญ่อยู่ระหว่าง 3-8 บาท/กก.) และมีความผันผวนสูงกว่าโมเดลราคาต่ำ พบว่าโมเดลมีแนวโน้มทำนายราคาต่ำเกินไปในช่วงที่อุปทานลดลงกะทันหัน (เช่น ฝนแล้งหรือน้ำท่วม) และทำนายสูงเกินไปในช่วงที่อุปทานเพิ่มขึ้นกะทันหัน (เช่น ผลผลิตออกสู่ตลาดพร้อมกัน)

สำหรับโมเดลราคาสูง ข้อผิดพลาดมีขนาดใหญ่มาก (ส่วนใหญ่มากกว่า 15 บาท/กก.) และมีความผันผวนสูงมาก พืชราคาสูงมักเป็นพืชเฉพาะทางที่มีตลาดจำกัดและราคาขึ้นอยู่กับปัจจัยหลายอย่างที่ยากต่อการคาดการณ์ เช่น แฟชั่นการบริโภค ความนิยมในการส่งออก และการแข่งขันจากประเทศอื่น ข้อจำกัดนี้เป็นที่ยอมรับและระบบได้แสดง Confidence ต่ำและ Price Range กว้างสำหรับกลุ่มนี้

การวิเคราะห์ Temporal Bias พบว่า โมเดลมีการพึ่งพาราคาล่าสุด (price_lag_7) อยู่ที่ 32.1% ซึ่งลดลงจาก Baseline Model ที่พึ่งพามากกว่า 95% แสดงว่าการบูรณาการปัจจัยภายนอกช่วยลดอคติทางเวลาได้อย่างมีนัยสำคัญ อย่างไรก็ตาม ยังมีการพึ่งพาราคาในอดีตอยู่ค่อนข้างสูง ซึ่งเป็นธรรมชาติของการพยากรณ์อนุกรมเวลา


4.3 การทดสอบระบบแบบครบวงจร (End-to-End Testing)

4.3.1 กรณีศึกษาที่ 1: การปลูกพริกในจังหวัดเชียงใหม่

สมมติว่าเกษตรกรในจังหวัดเชียงใหม่มีพื้นที่ 10 ไร่ งบประมาณ 50,000 บาท และต้องการคำแนะนำในการเพาะปลูก ระบบทำงานดังนี้

ขั้นตอนที่ 1: Model A แนะนำพืช
- Input: จังหวัดเชียงใหม่, พื้นที่ 10 ไร่, งบประมาณ 50,000 บาท, ดินร่วน, แหล่งน้ำชลประทาน
- Output: แนะนำพืช 3 อันดับแรก
  1. พริก - ROI 85.3%, ระยะเวลา 90 วัน, ความเสี่ยงปานกลาง
  2. มะเขือเทศ - ROI 72.1%, ระยะเวลา 75 วัน, ความเสี่ยงต่ำ
  3. ข้าวโพดหวาน - ROI 68.5%, ระยะเวลา 80 วัน, ความเสี่ยงต่ำ
- เกษตรกรเลือกปลูกพริก

ขั้นตอนที่ 2: Model B พยากรณ์ช่วงเวลาปลูก
- Input: พริก, จังหวัดเชียงใหม่, วันที่ต้องการตรวจสอบ (มิถุนายน 2025)
- Output: 
  - 1-15 มิถุนายน: เหมาะสม (Confidence 0.92) - อุณหภูมิเฉลี่ย 28°C, ฝนเริ่มตก
  - 16-30 มิถุนายน: เหมาะสมมาก (Confidence 0.95) - อุณหภูมิเหมาะสม, ฝนสม่ำเสมอ
  - 1-15 กรกฎาคม: เหมาะสม (Confidence 0.88) - ฝนมาก อาจมีน้ำท่วมขัง
- เกษตรกรเลือกปลูกวันที่ 20 มิถุนายน 2025

ขั้นตอนที่ 3: Model C พยากรณ์ราคา
- Input: พริก, จังหวัดเชียงใหม่, วันที่เก็บเกี่ยวคาดว่า 18 กันยายน 2025 (90 วันหลังปลูก)
- Output:
  - ราคาปัจจุบัน (20 มิถุนายน): 35 บาท/กก.
  - ราคาคาดการณ์ (18 กันยายน): 42 บาท/กก. (Confidence 0.82)
  - แนวโน้ม: เพิ่มขึ้น 20% เนื่องจากเป็นช่วงนอกฤดูกาล
  - ช่วงราคา: 38-46 บาท/กก.

ขั้นตอนที่ 4: Model D ตัดสินใจเก็บเกี่ยว
- Input: ราคาปัจจุบัน 42 บาท/กก., ราคาคาดการณ์ 7 วันข้างหน้า 44 บาท/กก., ผลผลิต 1,500 กก., ต้นทุนเก็บรักษา 50 บาท/วัน
- Output:
  - เก็บเกี่ยวทันที: กำไร 63,000 บาท
  - รอ 3 วัน: กำไร 65,850 บาท (แนะนำ)
  - รอ 7 วัน: กำไร 65,450 บาท
- เกษตรกรเลือกรอ 3 วัน

ผลลัพธ์สุดท้าย:
- ต้นทุนรวม: 50,000 บาท
- รายได้จากการขาย: 66,000 บาท (1,500 กก. × 44 บาท/กก.)
- กำไรสุทธิ: 16,000 บาท
- ROI จริง: 32% (ต่ำกว่าที่คาดการณ์ 85.3% เนื่องจากผลผลิตต่ำกว่าที่คาดหวัง)

4.3.2 กรณีศึกษาที่ 2: การปลูกข้าวในจังหวัดนครราชสีมา

สมมติว่าเกษตรกรในจังหวัดนครราชสีมามีพื้นที่ 20 ไร่ งบประมาณ 40,000 บาท และต้องการปลูกข้าว

ขั้นตอนที่ 1: Model A แนะนำพืช
- Input: จังหวัดนครราชสีมา, พื้นที่ 20 ไร่, งบประมาณ 40,000 บาท, ดินเหนียว, แหล่งน้ำฝน
- Output: แนะนำพืช 3 อันดับแรก
  1. ข้าว - ROI 45.2%, ระยะเวลา 120 วัน, ความเสี่ยงต่ำ
  2. มันสำปะหลัง - ROI 38.7%, ระยะเวลา 240 วัน, ความเสี่ยงต่ำมาก
  3. ถั่วเหลือง - ROI 35.1%, ระยะเวลา 90 วัน, ความเสี่ยงปานกลาง
- เกษตรกรเลือกปลูกข้าว

ขั้นตอนที่ 2: Model B พยากรณ์ช่วงเวลาปลูก
- Input: ข้าว, จังหวัดนครราชสีมา, วันที่ต้องการตรวจสอบ (พฤษภาคม-มิถุนายน 2025)
- Output:
  - 15-31 พฤษภาคม: ไม่เหมาะสม (Confidence 0.91) - ฝนยังไม่ตก ดินแห้ง
  - 1-15 มิถุนายน: เหมาะสม (Confidence 0.89) - ฝนเริ่มตก
  - 16-30 มิถุนายน: เหมาะสมมาก (Confidence 0.94) - ฝนสม่ำเสมอ
- เกษตรกรเลือกปลูกวันที่ 20 มิถุนายน 2025

ขั้นตอนที่ 3: Model C พยากรณ์ราคา
- Input: ข้าว, จังหวัดนครราชสีมา, วันที่เก็บเกี่ยวคาดว่า 18 ตุลาคม 2025
- Output:
  - ราคาปัจจุบัน (20 มิถุนายน): 12 บาท/กก.
  - ราคาคาดการณ์ (18 ตุลาคม): 11.5 บาท/กก. (Confidence 0.88)
  - แนวโน้ม: ลดลงเล็กน้อย 4.2% เนื่องจากเป็นช่วงเก็บเกี่ยวหลัก
  - ช่วงราคา: 10.8-12.2 บาท/กก.

ขั้นตอนที่ 4: Model D ตัดสินใจเก็บเกี่ยว
- Input: ราคาปัจจุบัน 11.5 บาท/กก., ราคาคาดการณ์ 7 วันข้างหน้า 11.3 บาท/กก., ผลผลิต 16,000 กก., ต้นทุนเก็บรักษา 100 บาท/วัน
- Output:
  - เก็บเกี่ยวทันที: กำไร 184,000 บาท (แนะนำ)
  - รอ 3 วัน: กำไร 183,700 บาท
  - รอ 7 วัน: กำไร 182,900 บาท
- เกษตรกรเลือกเก็บเกี่ยวทันที

ผลลัพธ์สุดท้าย:
- ต้นทุนรวม: 40,000 บาท
- รายได้จากการขาย: 184,000 บาท (16,000 กก. × 11.5 บาท/กก.)
- กำไรสุทธิ: 144,000 บาท
- ROI จริง: 360% (สูงกว่าที่คาดการณ์ 45.2% เนื่องจากผลผลิตสูงกว่าที่คาดหวัง)


4.4 การประเมินระบบโดยรวม

4.4.1 ประสิทธิภาพโดยรวมของระบบ

การประเมินประสิทธิภาพโดยรวมของระบบ Farmme พิจารณาจากหลายมิติ ดังนี้

ความแม่นยำของโมเดล (Model Accuracy): โมเดลทั้ง 4 ตัวมีประสิทธิภาพที่ดีถึงดีมาก โดย Model A มี R² 0.8549 Model B มี F1-Score 0.8488 Model C มี R² 0.7589 และ Model D มี Profit Efficiency 96.84% ซึ่งแสดงว่าโมเดลสามารถให้คำแนะนำที่มีความน่าเชื่อถือสูง

ความสอดคล้องระหว่างโมเดล (Model Consistency): การทดสอบพบว่าคำแนะนำจากโมเดลต่างๆ มีความสอดคล้องกัน เช่น พืชที่ Model A แนะนำมักเป็นพืชที่ Model B บอกว่ามีช่วงเวลาปลูกที่เหมาะสมในช่วงเวลาปัจจุบัน และ Model C พยากรณ์ว่าราคามีแนวโน้มดีในอนาคต ความสอดคล้องนี้แสดงว่าระบบทำงานเป็น Pipeline ที่สมบูรณ์

เวลาในการตอบสนอง (Response Time): การทดสอบพบว่าเวลาในการตอบสนองของแต่ละโมเดลอยู่ในระดับที่ยอมรับได้ โดย Model A ใช้เวลาเฉลี่ย 1.2 วินาที Model B ใช้เวลา 0.8 วินาที Model C ใช้เวลา 1.5 วินาที และ Model D ใช้เวลาน้อยกว่า 0.1 วินาที รวมเวลาทั้งหมดประมาณ 3.6 วินาที ซึ่งเร็วเพียงพอสำหรับการใช้งานจริง

ความทนทานต่อข้อมูลที่ขาดหาย (Robustness): การทดสอบพบว่าระบบสามารถทำงานได้แม้ว่าข้อมูลบางส่วนจะขาดหาย โดยระบบจะใช้ค่าเริ่มต้น (Default Values) หรือค่าเฉลี่ยทางประวัติศาสตร์แทน และแสดง Confidence ที่ลดลงตามความสมบูรณ์ของข้อมูล

4.4.2 ข้อจำกัดและข้อเสนอแนะ

แม้ว่าระบบ Farmme จะมีประสิทธิภาพที่ดี แต่ยังมีข้อจำกัดบางประการที่ควรพิจารณา ดังนี้

การใช้ข้อมูลสังเคราะห์: ระบบได้รับการฝึกด้วยข้อมูลสังเคราะห์ที่สร้างขึ้นเพื่อจำลองข้อมูลจริง แม้ว่าข้อมูลจะมีคุณสมบัติทางสถิติที่สอดคล้องกับข้อมูลจริง แต่อาจมีรูปแบบหรือความสัมพันธ์บางอย่างที่แตกต่างจากข้อมูลจริง ดังนั้น เมื่อนำระบบไปใช้งานจริง ควรมีการเก็บรวบรวมข้อมูลจริงและปรับปรุงโมเดลอย่างต่อเนื่อง

ความครอบคลุมของพืช: ระบบปัจจุบันครอบคลุมพืช 46 ชนิด ซึ่งเป็นพืชหลักที่เกษตรกรไทยนิยมปลูก แต่ยังมีพืชเฉพาะทางหรือพืชใหม่ๆ ที่ยังไม่ได้รวมอยู่ในระบบ การขยายความครอบคลุมของพืชจะช่วยให้ระบบมีประโยชน์มากขึ้น

ประสิทธิภาพสำหรับพืชราคาสูง: Model C มีประสิทธิภาพต่ำสำหรับพืชราคาสูง (R² = 0.0814) เนื่องจากพืชเหล่านี้มีความผันผวนสูงและได้รับอิทธิพลจากปัจจัยหลายอย่างที่ยากต่อการคาดการณ์ การปรับปรุงอาจทำได้โดยการพัฒนาโมเดลเฉพาะสำหรับพืชแต่ละชนิด หรือการบูรณาการข้อมูลเพิ่มเติม เช่น ข้อมูลการส่งออก แฟชั่นการบริโภค และราคาในตลาดโลก

การพึ่งพาข้อมูลสภาพอากาศ: Model B และ Model C พึ่งพาข้อมูลสภาพอากาศอย่างมาก ในกรณีที่ข้อมูลสภาพอากาศไม่สมบูรณ์หรือไม่แม่นยำ ประสิทธิภาพของโมเดลอาจลดลง การแก้ไขอาจทำได้โดยการใช้ข้อมูลจากหลายแหล่ง หรือการพัฒนาโมเดลที่สามารถทำงานได้แม้ว่าข้อมูลสภาพอากาศจะไม่สมบูรณ์

การปรับตัวกับการเปลี่ยนแปลง: โมเดล Machine Learning มีข้อจำกัดในการปรับตัวกับการเปลี่ยนแปลงที่ไม่เคยเกิดขึ้นมาก่อน เช่น โรคระบาดใหม่ นโยบายรัฐบาลที่เปลี่ยนแปลงกะทันหัน หรือภัยธรรมชาติที่รุนแรงผิดปกติ ดังนั้น ระบบควรมีกลไกในการอัปเดตโมเดลอย่างต่อเนื่องเมื่อมีข้อมูลใหม่ และควรมีการแจ้งเตือนเมื่อเกิดสถานการณ์ที่ผิดปกติ


4.5 การเปรียบเทียบกับระบบอื่น

4.5.1 การเปรียบเทียบกับระบบแนะนำพืชแบบดั้งเดิม

ระบบแนะนำพืชแบบดั้งเดิมมักใช้กฎเกณฑ์ที่กำหนดไว้ล่วงหน้า (Rule-based System) โดยพิจารณาจากปัจจัยพื้นฐาน เช่น ประเภทดิน สภาพอากาศ และงบประมาณ โดยไม่มีการคำนวณ ROI ที่แม่นยำ การเปรียบเทียบระหว่างระบบ Farmme (Model A) กับระบบแบบดั้งเดิมพบว่า

ความแม่นยำ: Model A สามารถทำนาย ROI ได้แม่นยำกว่า (R² = 0.8549) เมื่อเทียบกับระบบแบบดั้งเดิมที่มักให้คำแนะนำแบบทั่วไปโดยไม่มีการคำนวณผลตอบแทนที่ชัดเจน

ความครอบคลุม: Model A พิจารณาปัจจัยหลายมิติ (19 คุณลักษณะ) รวมถึงปัจจัยตลาด สภาพอากาศ และเศรษฐกิจ ในขณะที่ระบบแบบดั้งเดิมมักพิจารณาเฉพาะปัจจัยพื้นฐาน

ความเป็นส่วนตัว: Model A สามารถปรับคำแนะนำตามสภาพเฉพาะของแต่ละฟาร์ม ในขณะที่ระบบแบบดั้งเดิมมักให้คำแนะนำแบบทั่วไปสำหรับทุกพื้นที่

4.5.2 การเปรียบเทียบกับระบบพยากรณ์ราคาแบบดั้งเดิม

ระบบพยากรณ์ราคาแบบดั้งเดิมมักใช้เทคนิค Time Series แบบง่าย เช่น Moving Average หรือ ARIMA โดยพิจารณาเฉพาะข้อมูลราคาในอดีต การเปรียบเทียบระหว่าง Model C กับระบบแบบดั้งเดิมพบว่า

ความแม่นยำ: Model C (Stratified Gradient Boosting) มี MAE 6.97 บาท/กก. ซึ่งดีกว่า ARIMA ที่มี MAE ประมาณ 12-15 บาท/กก. และดีกว่า Simple Moving Average ที่มี MAE ประมาณ 18-20 บาท/กก.

การบูรณาการปัจจัยภายนอก: Model C พิจารณาปัจจัยหลายมิติ รวมถึงสภาพอากาศและตัวชี้วัดเศรษฐกิจ ในขณะที่ระบบแบบดั้งเดิมพิจารณาเฉพาะราคาในอดีต ทำให้ Model C สามารถปรับตัวกับการเปลี่ยนแปลงของตลาดได้ดีกว่า

การจัดการความผันผวน: Model C ใช้ Stratified Approach ที่แบ่งกลุ่มตามช่วงราคา ทำให้สามารถจัดการความผันผวนที่แตกต่างกันของพืชแต่ละกลุ่มได้ดีกว่าระบบที่ใช้โมเดลเดียวสำหรับทุกพืช

4.5.3 สรุปข้อได้เปรียบของระบบ Farmme

ระบบ Farmme มีข้อได้เปรียบหลายประการเมื่อเทียบกับระบบอื่น ได้แก่

ความครบวงจร: ระบบครอบคลุมทุกขั้นตอนของการเพาะปลูก ตั้งแต่การเลือกพืช การกำหนดช่วงเวลาปลูก การพยากรณ์ราคา ไปจนถึงการตัดสินใจเก็บเกี่ยว ในขณะที่ระบบอื่นมักครอบคลุมเฉพาะบางขั้นตอน

การบูรณาการ: โมเดลทั้ง 4 ตัวทำงานร่วมกันและส่งผ่านข้อมูลระหว่างกัน ทำให้คำแนะนำมีความสอดคล้องและเชื่อมโยงกัน

ความแม่นยำ: การใช้ Machine Learning ขั้นสูง เช่น Gradient Boosting และ Thompson Sampling ทำให้ระบบมีความแม่นยำสูงกว่าระบบที่ใช้เทคนิคแบบดั้งเดิม

การป้องกัน Data Leakage: ระบบมีกลไกการป้องกันการรั่วไหลของข้อมูลอย่างเป็นระบบ ทำให้ผลการประเมินมีความน่าเชื่อถือและสามารถนำไปใช้งานจริงได้

ความสามารถในการอธิบาย: ระบบสามารถอธิบายเหตุผลของคำแนะนำได้ผ่าน Feature Importance และ SHAP Values ช่วยสร้างความเชื่อมั่นให้กับผู้ใช้งาน


4.6 สรุป

บทนี้ได้นำเสนอผลการดำเนินงานของระบบ Farmme อย่างละเอียด ประกอบด้วยผลการประเมินประสิทธิภาพของโมเดลทั้ง 4 ตัว การวิเคราะห์ข้อผิดพลาดและข้อจำกัด การทดสอบระบบแบบครบวงจร และการเปรียบเทียบกับระบบอื่น

ผลการประเมินแสดงให้เห็นว่าโมเดลทั้ง 4 ตัวมีประสิทธิภาพที่ดีถึงดีมาก โดย Model A (Gradient Boosting) สามารถทำนาย ROI ได้แม่นยำด้วย R² 0.8549 และ RMSE 47.10% Model B (Gradient Boosting) สามารถจำแนกช่วงเวลาปลูกได้ดีด้วย F1-Score 0.8488 และ Recall สูงมากที่ 0.9393 Model C (Stratified Gradient Boosting) สามารถพยากรณ์ราคาได้แม่นยำด้วย R² 0.7589 และ MAE 6.97 บาท/กก. โดยเฉพาะพืชราคาต่ำที่ครอบคลุม 52% ของตลาดมีความแม่นยำสูงมาก (R² 0.7722) และ Model D (Thompson Sampling) สามารถตัดสินใจเก็บเกี่ยวได้อย่างมีประสิทธิภาพด้วย Profit Efficiency 96.84%

การวิเคราะห์ข้อผิดพลาดพบว่า โมเดลมีข้อจำกัดบางประการ เช่น Model A มีแนวโน้มทำนาย ROI ต่ำเกินไปสำหรับพืชที่มี ROI สูงมาก Model B มี False Positive ค่อนข้างสูง (168 กรณี) และ Model C มีประสิทธิภาพต่ำสำหรับพืชราคาสูง อย่างไรก็ตาม ข้อจำกัดเหล่านี้เป็นที่เข้าใจได้และมีแนวทางในการปรับปรุง

การทดสอบระบบแบบครบวงจรผ่านกรณีศึกษา 2 กรณี แสดงให้เห็นว่าระบบสามารถทำงานเป็น Pipeline ที่สมบูรณ์ โดยโมเดลแต่ละตัวส่งผ่านข้อมูลและทำงานร่วมกันได้อย่างมีประสิทธิภาพ คำแนะนำจากโมเดลต่างๆ มีความสอดคล้องกันและช่วยให้เกษตรกรสามารถตัดสินใจได้อย่างมีข้อมูลประกอบ

การเปรียบเทียบกับระบบอื่นแสดงให้เห็นว่าระบบ Farmme มีข้อได้เปรียบหลายประการ ทั้งในด้านความครบวงจร การบูรณาการ ความแม่นยำ และความสามารถในการอธิบาย ซึ่งทำให้ระบบมีศักยภาพสูงในการนำไปใช้งานจริงเพื่อช่วยเหลือเกษตรกรไทย

ผลลัพธ์ที่ได้แสดงให้เห็นว่าการใช้ Machine Learning ในภาคการเกษตรมีศักยภาพสูงในการเพิ่มประสิทธิภาพการผลิต ลดความเสี่ยง และเพิ่มรายได้ให้กับเกษตรกร อย่างไรก็ตาม ความสำเร็จของระบบในการใช้งานจริงจะขึ้นอยู่กับหลายปัจจัย เช่น ความพร้อมของข้อมูล การยอมรับของเกษตรกร และการสนับสนุนจากภาครัฐและเอกชน ซึ่งจะได้กล่าวถึงในบทถัดไป

